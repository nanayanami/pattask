<div class="posts cover">
  <h1 class="posts-title">ブックマーク一覧</h1>

  <% @posts.each do |post| %>
    <div class="post-item">
      <div class="d-flex justify-content-between align-items-center post-head">
        <h3 class="mb-0 post-title">
          <%= link_to post.title, team_category_post_path(post.team, post.category, post) %>
        </h3>
        <div class="d-flex gap-2 post-actions">
          <%= render "posts/progress_badge", post: post %>
          <% if post.completed? %>
            <%= button_to "進捗に戻す",
                          uncomplete_team_category_post_path(post.team, post.category, post),
                          method: :patch,
                          class: "btn btn-sm btn-uncomplete" %>
          <% end %>
          <%= link_to "ブックマーク解除",
                      team_category_post_favorites_path(post.team, post.category, post, redirect_to: "favorites"),
                      data: { turbo_method: :delete },
                      class: "btn btn-outline-secondary btn-sm" %>
        </div>
      </div>

      <div class="d-flex flex-wrap gap-2">
        <p class="caption mb-0">チーム: <%= post.team&.name %></p>
        <p class="caption mb-0">カテゴリー: <%= post.category&.name %></p>
      </div>
    </div>
  <% end %>

  <div class="pagination-wrapper">
    <%= paginate @posts %>
  </div>
</div>
